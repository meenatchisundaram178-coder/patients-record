<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Add New Patient</title>

<style>
  body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #0099cc, #00c6a7);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding-top: 40px;
}

.container {
    width: 80%;
    max-width: 1200px;
    background: #ffffff;
    padding: 30px 40px;
    border-radius: 12px;
    box-shadow: 0px 6px 25px rgba(0,0,0,0.1);
}

h2 {
    margin: 0 0 20px;
}

.section-title {
    font-weight: bold;
    margin-top: 25px;
    margin-bottom: 10px;
    color: #0d8a5a;
    font-size: 18px;
}

.grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

.grid-4 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 5px;
    display: block;
}

input, select, textarea {
    width: 80%;
    padding: 10px;
    border: 1px solid #dcdcdc;
    border-radius: 5px;
    font-size: 14px;
}

/* üî• Remove thick border on focus */
input:focus, select:focus, textarea:focus {
    outline: none;
    border: 1px solid #0d8a5a;
    box-shadow: 0 0 4px rgba(0,0,0,0.15);
}

textarea {
    min-height: 90px;
}

.buttons {
    text-align: right;
    margin-top: 25px;
}

.cancel-btn {
    padding: 8px 18px;
    border: 1px solid #333;
    border-radius: 5px;
    background: #fff;
    cursor: pointer;
}

.add-btn {
    padding: 10px 20px;
    border-radius: 5px;
    background: #0d8a5a;
    color: white;
    border: none;
    cursor: pointer;
    margin-left: 10px;
}

/* ----------- CHECKBOX DROPDOWN STYLE --------------- */
.checkbox-dropdown {
    position: relative;
    width: 300px;
    font-size: 15px;
}

.checkbox-dropdown-button {
    padding: 12px;
    border: 1px solid #aaa;
    border-radius: 6px;
    cursor: pointer;
    background: white;
    font-size: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.checkbox-dropdown-button::after {
    content: "‚ñº";
    font-size: 12px;
    color: #333;
}

.checkbox-list {
    display: none;
    position: absolute;
    width: 100%;
    max-height: 230px;
    overflow-y: auto;
    overflow-x: auto;
    background: white;
    border: 1px solid #ccc;
    border-radius: 10px;
    padding: 15px;
    z-index: 10;
}

/* ‚≠ê Thin Scrollbar */
.checkbox-list::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

.checkbox-list::-webkit-scrollbar-thumb {
    background: #bdbdbd;
    border-radius: 10px;
}

.checkbox-list::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.checkbox-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px 20px;
}

.checkbox-grid label {
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.checkbox-grid input {
    width: 16px;
    height: 16px;
}

/* ----------- MOBILE RESPONSIVE -------------- */
@media (max-width: 768px) {

    body {
        padding: 10px;
    }

    .container {
        padding: 15px;
    }

    .grid {
        grid-template-columns: 1fr !important;
    }

    .grid-4 {
        grid-template-columns: 1fr 1fr !important;
    }

    .buttons {
        text-align: center;
    }

    .add-btn,
    .cancel-btn {
        width: 45%;
        margin-top: 10px;
    }
}

@media (max-width: 480px) {

    .grid-4 {
        grid-template-columns: 1fr !important;
    }

    .checkbox-grid {
        grid-template-columns: 1fr !important;
    }

    .add-btn,
    .cancel-btn {
        width: 100%;
        margin-left: 0;
    }
}
</style>
</head>

<body>

<div class="container">
    <h2>ADD NEW PATIENT</h2>

    <!-- BASIC INFORMATION -->
    <div class="section-title">BASIC INFORMATION</div>

    <div class="grid">

        <div>
            <label>Branch *</label>
                <select id="branch">
                    <option value="" disabled selected>Select branch</option>
                    <option value="Tirupattur">Tirupattur</option>
                    <option value="Uthangarai">Uthangarai</option>
                 </select>
        </div>

        <div>
            <label>Full Name *</label>
            <input type="text" placeholder="Enter full name" />
        </div>

        <div>
            <label>Age *</label>
            <input type="number" placeholder="Age" />
        </div>

        <div>
            <label>Gender *</label>
                <select>
                    <option value="" disabled selected>Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
        </div>

        <div>
            <label>Contact *</label>
            <input type="text" placeholder="Phone number" />
        </div>

        <div>
            <label>Email</label>
            <input type="email" placeholder="example@gmail.com" />
        </div>

        <div>
            <label>Address</label>
            <input type="text" placeholder="Enter address" />
        </div>
    </div>

    <!-- RIGHT EYE -->
    <div class="section-title">RIGHT EYE (OD) PRESCRIPTION</div>
    <div class="grid-4">
        <div><label>SPH</label><input type="text" placeholder="e.g., -2.00" /></div>
        <div><label>CYL</label><input type="text" placeholder="e.g., -0.50" /></div>
        <div><label>AXIS</label><input type="text" placeholder="e.g., 180" /></div>
        <div><label>ADD</label><input type="text" placeholder="e.g., +2.00" /></div>
    </div>

    <!-- LEFT EYE -->
    <div class="section-title">LEFT EYE (OS) PRESCRIPTION</div>
    <div class="grid-4">
        <div><label>SPH</label><input type="text" placeholder="e.g., -2.25" /></div>
        <div><label>CYL</label><input type="text" placeholder="e.g., -0.75" /></div>
        <div><label>AXIS</label><input type="text" placeholder="e.g., 90" /></div>
        <div><label>ADD</label><input type="text" placeholder="e.g., +2.00" /></div>
    </div>

    <!-- VISION -->
    <div class="section-title">VISION & MEASUREMENTS</div>
    <div class="grid">
        <div>
            <label>Vision (OD)</label>
            <input type="text" placeholder="e.g., 20/20" />
        </div>
        <div>
            <label>Vision (OS)</label>
            <input type="text" placeholder="e.g., 20/40" />
        </div>
        <div>
            <label>PD (Pupillary Distance)</label>
            <input type="text" placeholder="e.g., 63mm" />
        </div>
    </div>

    <!-- EYEWEAR DETAILS -->
    <div class="section-title">EYEWEAR DETAILS</div>
    <div class="grid">

        <div>
            <label>Frame Type</label>
                <select>
                    <option value="" disabled selected>Select Frame Type</option>
                    <option value="Full-rim">Full-rim</option>
                    <option value="Semi-rimless">Semi-rimless</option>
                    <option value="Rimless">Rimless</option>
                </select>
        </div>

        <div>
            <label>Lens Type</label>
            <select>
                <option value="" disabled selected>Select Lens Type</option>
                <option value="Single Vision">Single Vision</option>
                <option value="Bifocal">Bifocal</option>
                <option value="Progressive">Progressive</option>
            </select>
        </div>

        <!-- Lens Coating -->
        <div class="form-group">
            <label>Lens Coating</label>

            <div class="checkbox-dropdown">
                <div class="checkbox-dropdown-button" onclick="toggleCoatingDropdown()">
                    Select Coatings
                </div>

                <div class="checkbox-list" id="coatingList">
                    <div class="checkbox-grid">
                        <label><input type="checkbox"> Crizal</label>
                        <label><input type="checkbox"> Prevencia</label>
                        <label><input type="checkbox"> Blue Block</label>
                        <label><input type="checkbox"> S92</label>
                        <label><input type="checkbox"> PG</label>
                        <label><input type="checkbox"> Krypto</label>
                        <label><input type="checkbox"> DBF</label>
                        <label><input type="checkbox"> Essilor</label>
                        <label><input type="checkbox"> Progressive</label>
                        <label><input type="checkbox"> Free Form</label>
                        <label><input type="checkbox"> GKB Swiss</label>
                        <label><input type="checkbox"> Glass</label>
                        <label><input type="checkbox"> CR</label>
                        <label><input type="checkbox"> Hindex</label>
                        <label><input type="checkbox"> ARC</label>
                        <label><input type="checkbox"> Promax</label>
                        <label><input type="checkbox"> Kodak</label>
                    </div>
                </div>
            </div>
        </div>

        <div>
            <label>Contact Lens Type</label>
            <input type="text" placeholder="e.g., Daily, Monthly" />
        </div>

    </div>

    <!-- ADDITIONAL INFORMATION -->
    <div class="section-title">ADDITIONAL INFORMATION</div>

    <label>Systemic History</label>
    <textarea placeholder="Diabetes, Hypertension, Thyroid..."></textarea>

    <label>Ocular History</label>
    <textarea placeholder="Eye surgeries, previous issues..."></textarea>

    <label>Eye Conditions</label>
    <textarea placeholder="Any eye conditions or concerns"></textarea>

    <label>Notes</label>
    <textarea placeholder="Additional notes"></textarea>

    <label>Next Appointment</label>
    <input type="date" />

    <!-- PAYMENT DETAILS -->
    <div class="section-title">PAYMENT DETAILS</div>

    <div class="grid">
        <div>
            <label>Total Amount *</label>
            <input type="number" id="total" placeholder="Total Amount">
        </div>

        <div>
            <label>Advance *</label>
            <input type="number" id="advance" placeholder="Advance Paid">
        </div>

        <div>
            <label>Remaining Amount</label>
            <input type="number" id="remaining" readonly>
        </div>
    </div>

    <!-- BUTTONS -->
    <div class="buttons">
        <button class="cancel-btn">Cancel</button>
        <button class="add-btn">Add Patient</button>
    </div>

</div>

<script>
function toggleCoatingDropdown() {
    let list = document.getElementById("coatingList");
    list.style.display = (list.style.display === "block") ? "none" : "block";
}

document.getElementById("total").addEventListener("input", calculateRemaining);
document.getElementById("advance").addEventListener("input", calculateRemaining);

function calculateRemaining() {
    let total = Number(document.getElementById("total").value);
    let advance = Number(document.getElementById("advance").value);
    let remaining = total - advance;
    document.getElementById("remaining").value = remaining >= 0 ? remaining : 0;
}
// ---------- AUTO FILL WHEN VIEW ----------
document.querySelector(".add-btn").onclick = () => {

    let p = {
        branch: document.getElementById("branch").value,
        name: document.querySelector("input[placeholder='Enter full name']").value,
        age: document.querySelector("input[placeholder='Age']").value,
        gender: document.querySelector("select").value,
        phone: document.querySelector("input[placeholder='Phone number']").value,
        email: document.querySelector("input[placeholder='example@gmail.com']").value,
        address: document.querySelector("input[placeholder='Enter address']").value,

        sph_od: document.querySelector("input[placeholder='e.g., -2.00']").value,
        cyl_od: document.querySelector("input[placeholder='e.g., -0.50']").value,
        axis_od: document.querySelector("input[placeholder='e.g., 180']").value,
        add_od: document.querySelectorAll("input[placeholder='e.g., +2.00']")[0].value,

        sph_os: document.querySelectorAll("input[placeholder='e.g., -2.25']")[0].value,
        cyl_os: document.querySelectorAll("input[placeholder='e.g., -0.75']")[0].value,
        axis_os: document.querySelectorAll("input[placeholder='e.g., 90']")[0].value,
        add_os: document.querySelectorAll("input[placeholder='e.g., +2.00']")[1].value,

        vision_od: document.querySelector("input[placeholder='e.g., 20/20']").value,
        vision_os: document.querySelector("input[placeholder='e.g., 20/40']").value,
        pd: document.querySelector("input[placeholder='e.g., 63mm']").value,

        systemicHistory: document.querySelectorAll("textarea")[0].value,
        ocularHistory: document.querySelectorAll("textarea")[1].value,
        eyeConditions: document.querySelectorAll("textarea")[2].value,
        notes: document.querySelectorAll("textarea")[3].value,

        nextAppointment: document.querySelector("input[type='date']").value,

        total: document.getElementById("total").value,
        advance: document.getElementById("advance").value,
        remaining: document.getElementById("remaining").value,
    };

    let patients = JSON.parse(localStorage.getItem("patients")) || [];
    patients.push(p);
    localStorage.setItem("patients", JSON.stringify(patients));

    // --- SAVE PAYMENT RECORD FOR VIEW PAYMENT PAGE ---
let payments = JSON.parse(localStorage.getItem("payments")) || [];

payments.push({
    name: p.name,
    branch: p.branch,
    date: new Date().toLocaleDateString(),
    amount: p.advance
});

localStorage.setItem("payments", JSON.stringify(payments));

    alert("Patient saved successfully!");
    window.location.href = "Patient Records.html";
};


</script>

</body>
</html>